function Calendar(t,e,i,a){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var s=getObject(t);if(void 0==s)return alert("No Calendar target named"+t+" found"),!1;this.current_date=new Date,this.current_dateYear=this.current_date.getFullYear(),this.current_dateMonth=this.current_date.getMonth(),this.current_dateDate=this.current_date.getDate(),this.target_id=t,this.id=this.target_id+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time";var h=getObject(this.id);if(void 0==h)h=document.createElement("div"),h.id=this.id,h.className="w_calendar_div",s.insertAdjacentElement("afterEnd",h);else if(void 0==a&&"block"==h.style.display)return void(h.style.display="none");var r=s.getAttribute("data-type");if(void 0!=r)switch(r.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0,h.style.width="220px";break;case"time":this.showtime=!0,this.showdate=!1,h.style.width="115px";break;default:this.showdate=!0,this.showtime=!1,h.style.width="175px"}else this.showdate=!0,this.showtime=!1,h.style.width="175px";this.hasvalue=!1;var n=getText(s);if(n.length){this.hasvalue=!0;var l=n.split(/[- :]/);6==l.length?(this.cval=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2]),parseInt(l[3]),parseInt(l[4]),parseInt(l[5]),0),this.cvalYear=this.cval.getFullYear(),this.cvalMonth=this.cval.getMonth(),this.cvalDate=this.cval.getDate(),this.cvalHr=this.cval.getHours(),this.cvalMin=this.cval.getMinutes()):3==l.length&&4==l[0].length?(this.cval=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2]),0,0,0,0),this.cvalYear=this.cval.getFullYear(),this.cvalMonth=this.cval.getMonth(),this.cvalDate=this.cval.getDate()):3==l.length&&(this.cval=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),0),this.cvalHr=this.cval.getHours(),this.cvalMin=this.cval.getMinutes())}var d="";if(this.showdate){void 0==e&&void 0==i&&n.length&&(e=this.cval.getMonth(),i=this.cval.getFullYear(),this.current_day=this.cval.getDay()),this.month=isNaN(e)||null==e?this.current_date.getMonth():e,this.year=isNaN(i)||null==i?this.current_date.getFullYear():i,this.days_labels=["Su","Mo","Tu","We","Th","Fr","Sa"],this.months_labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.days_in_month=[31,28,31,30,31,30,31,31,30,31,30,31];var o=new Date(this.year,this.month,1),c=o.getDay();switch(this.month=o.getMonth(),this.year=o.getFullYear(),this.nextyear=parseInt(this.year)+1,this.prevyear=parseInt(this.year)-1,parseInt(this.month)){case 0:this.prevmonth=11,this.nextmonth=this.month+1,this.prevmonthyear=parseInt(this.year)-1,this.nextmonthyear=this.year;break;case 11:this.prevmonth=this.month-1,this.nextmonth=0,this.prevmonthyear=this.year,this.nextmonthyear=parseInt(this.year)+1;break;default:this.prevmonth=this.month-1,this.nextmonth=this.month+1,this.prevmonthyear=this.year,this.nextmonthyear=this.year}var v=this.days_in_month[this.month];1==this.month&&(this.year%4==0&&this.year%100!=0||this.year%400==0)&&(v=29);var g=this.months_labels[this.month];d+='<table border="0" style="border:1px solid #CCC;"><tr valign="top"><td style="padding:0px !important;">',d+='<table class="w_calendar_table">',d+='	<tr class="w_calendar_month">\n',d+='		<th title="Prev Year" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.month+"','"+this.prevyear+'\',1);"><span class="icon-dir-left w_link w_block"></span></th>\n',d+='		<th title="Prev Month" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.prevmonth+"','"+this.prevmonthyear+'\',1);"><span class="icon-arrow-left w_link w_block"></span></th>\n',d+='		<th colspan="3" class="w_calendar_title">'+g+"&nbsp;"+this.year+"</th>\n",d+='		<th title="Next Month" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.nextmonth+"','"+this.nextmonthyear+'\',1);"><span class="icon-arrow-right w_link w_block"></span></th>\n',d+='		<th title="Next Year" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.month+"','"+this.nextyear+'\',1);"><span class="icon-dir-right w_link w_block"></span></th>\n',d+="	</tr>\n",d+='	<tr class="w_calendar_head">\n';for(var w=0;6>=w;w++)d+='		<th style="padding:0px !important;">'+this.days_labels[w]+"</th>\n";d+="	</tr>\n",d+='	<tr class="w_calendar_body">\n';for(var m=1,p=1,w=0;9>w;w++){for(var _=0;6>=_;_++){var u=!1,y=new Date(this.year,this.month,m,0,0,0,0);this.current_dateYear==y.getFullYear()&&this.current_dateMonth==y.getMonth()&&this.current_dateDate==y.getDate()&&(u=!0);var x=!1;if(this.hasvalue&&this.cvalYear==y.getFullYear()&&this.cvalMonth==y.getMonth()&&this.cvalDate==y.getDate()&&(x=!0),d+=0==_||6==_?"		<th":"		<td",x?d+=' class="active"':u&&(d+=' class="today"'),d+=' style="padding:0px !important;">',v>=m&&(w>0||_>=c)){var b=10>m?"0"+m:m,f=CalendarTwoDigits(this.month+1),D=this.year+"-"+f+"-"+b;d+="<div onclick=\"CalendarSetDate('"+this.target_id+"','"+D+"');\">"+m+"</div>",m++}d+=0==_||6==_?"</th>\n":"</td>\n"}if(m>v)break;d+="	</tr>\n",d+='	<tr class="w_calendar_body">\n',p++}if(d+="</tr>\n",d+="</table></td>\n",this.showtime){this.timesheight=parseInt(21*p)+15,d+='<td style="padding:0px !important;" nowrap>\n',d+='<div class="w_bold w_smaller" align="center">Time</div>\n',this.showtimes=this.id+"_showtimes",d+='<div class="w_calendar_times" id="'+this.showtimes+'" style="height:'+this.timesheight+'px !important;">\n';for(var C=new Array(24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23),M=new Array("00","30"),I=0;I<C.length;I++){var T,k="am";C[I]>12?(0!=I&&(k="pm"),T=C[I]-12):T=C[I];for(var Y=CalendarTwoDigits(C[I]),f=0;f<M.length;f++){var H=T+":"+M[f]+" "+k,D=Y+":"+M[f]+":00",y=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(C[I]),parseInt(M[f]),0,0),x=!1;this.hasvalue&&this.cvalHr==y.getHours()&&this.cvalMin==y.getMinutes()&&(x=!0),d+="<div onclick=\"CalendarSetTime('"+this.target_id+"','"+D+'\');" class="w_calendar_time',x&&(d+=" active"),d+='">'+H+"</div>\n"}}d+="</div>\n",d+="</td>\n"}d+="	</tr>\n",d+='	<tr><td colspan="7" style="display:relative;">\n',d+="		<table><tr>\n",this.showtime?(d+='		<td style="width:50%;"><div id="'+this.dateid+'" style="height:15px;text-align:right;padding-right:4px;">',this.hasvalue&&void 0!=this.cvalYear&&(d+=this.cvalYear+"-"+CalendarTwoDigits(this.cvalMonth+1)+"-"+CalendarTwoDigits(this.cvalDate)),d+="</div></td>\n",d+='		<td style="width:50%"><div id="'+this.timeid+'" style="height:15px;text-align:left;padding-left:4px;">',this.hasvalue&&void 0!=this.cvalHr&&(d+=CalendarTwoDigits(this.cvalHr)+":"+CalendarTwoDigits(this.cvalMin)+":00"),d+="</div></td>\n"):(d+='		<td width="100%"><div id="'+this.dateid+'" style="height:15px;text-align:center;">',this.hasvalue&&void 0!=this.cvalYear&&(d+=this.cvalYear+"-"+CalendarTwoDigits(this.cvalMonth+1)+"-"+CalendarTwoDigits(this.cvalDate)),d+="</div></td>\n"),d+='	<td class="w_calendar_close" title="Click to close" onclick="hideId(\''+this.id+'\');"><span class="icon-cancel-circled w_link w_block"></span></td>\n',d+="</tr></table></td></tr></table>\n"}else if(this.showtime){this.timesheight=200,d+='<div style="width:100px;">\n',d+='<div class="w_bold w_small" align="center">Time</div>\n',this.showtimes=this.id+"_showtimes",d+='<div class="w_calendar_times" id="'+this.showtimes+'" style="height:'+this.timesheight+'px;">\n';for(var C=new Array(24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23),M=new Array("00","30"),I=0;I<C.length;I++){var T,k="am";C[I]>12?(0!=I&&(k="pm"),T=C[I]-12):T=C[I];for(var Y=CalendarTwoDigits(C[I]),f=0;f<M.length;f++){var H=T+":"+M[f]+" "+k,D=Y+":"+M[f]+":00",y=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(C[I]),parseInt(M[f]),0,0),x=!1;this.hasvalue&&this.cvalHr==y.getHours()&&this.cvalMin==y.getMinutes()&&(x=!0),d+="<div onclick=\"CalendarSetTime('"+this.target_id+"','"+D+'\');" class="w_calendar_time',x&&(d+=" active"),d+='">'+H+"</div>\n"}}d+="</div>\n",d+='<div id="'+this.timeid+'" style="height:15px;text-align:center;">',this.hasvalue&&void 0!=this.cvalHr&&(d+=CalendarTwoDigits(this.cvalHr)+":"+CalendarTwoDigits(this.cvalMin)+":00"),d+="</div>\n",d+="</div>\n"}h.innerHTML=d,h.style.display="block";var I=getHeight(h);if(I=parseInt(I)+3,150>I&&(I=150),h.style.bottom="-"+I+"px",h.style.left="0px",h.style.zIndex=this.current_date.getTime(),this.showtime){var N=getObject(this.showtimes);N.scrollTop=320}return!1}function CalendarSetDate(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;if(this.id=t+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time",setText(this.dateid,e),!this.showtime)return setText(t,e),hideId(this.id),!1;var s=getText(this.timeid);return s.length&&(setText(t,e+" "+s),hideId(this.id)),!1}function CalendarSetTime(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;if(this.id=t+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time",setText(this.timeid,e),!this.showdate)return setText(t,e),hideId(this.id),!1;var s=getText(this.dateid);return s.length&&(setText(t,s+" "+e),hideId(this.id)),!1}function CalendarTwoDigits(t){return t>=0&&10>t?"0"+t.toString():t>-10&&0>t?"-0"+(-1*t).toString():t.toString()}