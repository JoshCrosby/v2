function Calendar(t,e,i,a){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var s=getObject(t);if(void 0==s)return alert("No Calendar target named"+t+" found"),!1;this.current_date=new Date,this.current_dateYear=this.current_date.getFullYear(),this.current_dateMonth=this.current_date.getMonth(),this.current_dateDate=this.current_date.getDate(),this.current_dateHour=this.current_date.getHours(),this.current_dateMin=this.current_date.getMinutes(),this.target_id=t,this.id=this.target_id+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time";var r=getObject(this.id);if(void 0==r)r=document.createElement("div"),r.id=this.id,r.className="w_calendar_div",s.insertAdjacentElement("afterEnd",r);else if(void 0==a&&"inline-block"==r.style.display)return void(r.style.display="none");var h=s.getAttribute("data-type");if(void 0!=h)switch(h.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;this.hasvalue=!1;var n=getText(s);if(n.length){this.hasvalue=!0;var l=n.split(/[- :]/);6==l.length?(this.cval=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2]),parseInt(l[3]),parseInt(l[4]),parseInt(l[5]),0),this.cvalYear=this.cval.getFullYear(),this.cvalMonth=this.cval.getMonth(),this.cvalDate=this.cval.getDate(),this.cvalHr=this.cval.getHours(),this.cvalMin=this.cval.getMinutes()):3==l.length&&4==l[0].length?(this.cval=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2]),0,0,0,0),this.cvalYear=this.cval.getFullYear(),this.cvalMonth=this.cval.getMonth(),this.cvalDate=this.cval.getDate()):3==l.length&&(this.cval=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),0),this.cvalHr=this.cval.getHours(),this.cvalMin=this.cval.getMinutes())}var d="";if(this.showdate){void 0==e&&void 0==i&&n.length&&(e=this.cval.getMonth(),i=this.cval.getFullYear(),this.current_day=this.cval.getDay()),this.month=isNaN(e)||null==e?this.current_date.getMonth():e,this.year=isNaN(i)||null==i?this.current_date.getFullYear():i,this.days_labels=["Su","Mo","Tu","We","Th","Fr","Sa"],this.months_labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.days_in_month=[31,28,31,30,31,30,31,31,30,31,30,31];var o=new Date(this.year,this.month,1),c=o.getDay();switch(this.month=o.getMonth(),this.year=o.getFullYear(),this.nextyear=parseInt(this.year)+1,this.prevyear=parseInt(this.year)-1,parseInt(this.month)){case 0:this.prevmonth=11,this.nextmonth=this.month+1,this.prevmonthyear=parseInt(this.year)-1,this.nextmonthyear=this.year;break;case 11:this.prevmonth=this.month-1,this.nextmonth=0,this.prevmonthyear=this.year,this.nextmonthyear=parseInt(this.year)+1;break;default:this.prevmonth=this.month-1,this.nextmonth=this.month+1,this.prevmonthyear=this.year,this.nextmonthyear=this.year}var v=this.days_in_month[this.month];1==this.month&&(this.year%4==0&&this.year%100!=0||this.year%400==0)&&(v=29);var g=this.months_labels[this.month];d+='<table class="w_calendar_table" border="0" style="border:1px solid #CCC;padding:0px !important"><tr valign="top"><td style="padding:0px !important;border-right:px solid #CCC !important;">',d+='<table class="w_calendar_table">',d+='	<tr class="w_calendar_month">\n',d+='		<th title="Prev Year" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.month+"','"+this.prevyear+'\',1);"><span class="icon-dir-left w_link w_block"></span></th>\n',d+='		<th title="Prev Month" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.prevmonth+"','"+this.prevmonthyear+'\',1);"><span class="icon-arrow-left w_link w_block"></span></th>\n',d+='		<th colspan="3" class="w_calendar_title">'+g+"&nbsp;"+this.year+"</th>\n",d+='		<th title="Next Month" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.nextmonth+"','"+this.nextmonthyear+'\',1);"><span class="icon-arrow-right w_link w_block"></span></th>\n',d+='		<th title="Next Year" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.month+"','"+this.nextyear+'\',1);"><span class="icon-dir-right w_link w_block"></span></th>\n',d+="	</tr>\n",d+='	<tr class="w_calendar_head">\n';for(var m=0;6>=m;m++)d+='		<th style="padding:0px !important;">'+this.days_labels[m]+"</th>\n";d+="	</tr>\n",d+='	<tr class="w_calendar_body">\n';for(var w=1,p=1,m=0;9>m;m++){for(var _=0;6>=_;_++){var u=!1,y=new Date(this.year,this.month,w,0,0,0,0);this.current_dateYear==y.getFullYear()&&this.current_dateMonth==y.getMonth()&&this.current_dateDate==y.getDate()&&(u=!0);var b=!1;if(this.hasvalue&&this.cvalYear==y.getFullYear()&&this.cvalMonth==y.getMonth()&&this.cvalDate==y.getDate()&&(b=!0),d+=0==_||6==_?"		<th":"		<td",b?d+=' class="active"':u&&(d+=' class="today"'),d+=' style="padding:0px !important;">',v>=w&&(m>0||_>=c)){var f=10>w?"0"+w:w,x=CalendarTwoDigits(this.month+1),C=this.year+"-"+x+"-"+f;d+="<div onclick=\"CalendarSetDate('"+this.target_id+"','"+C+"');\">"+w+"</div>",w++}d+=0==_||6==_?"</th>\n":"</td>\n"}if(w>v)break;d+="	</tr>\n",d+='	<tr class="w_calendar_body">\n',p++}if(d+="</tr>\n",d+="</table></td>\n",this.showtime){this.timesheight=parseInt(21*p)+15,d+='<td style="padding:0px !important;border-left:1px solid #CCC;" nowrap>\n',d+='<div class="w_bold w_smaller" align="center">Time</div>\n',this.showtimes=this.id+"_showtimes",d+='<div class="w_calendar_times" id="'+this.showtimes+'" style="height:'+this.timesheight+'px !important;">\n';for(var D=new Array(24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23),I=new Array("00","30"),M=0;M<D.length;M++){var T,k="am";D[M]>12?(0!=M&&(k="pm"),T=D[M]-12):T=D[M];for(var Y=CalendarTwoDigits(D[M]),x=0;x<I.length;x++){var H=T+":"+I[x]+" "+k,C=Y+":"+I[x]+":00",y=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(D[M]),parseInt(I[x]),0,0),b=!1;this.hasvalue&&this.cvalHr==y.getHours()&&this.cvalMin==y.getMinutes()&&(b=!0),d+="<div onclick=\"CalendarSetTime('"+this.target_id+"','"+C+'\');" class="w_calendar_time',b&&(d+=" active"),d+='">'+H+"</div>\n"}}d+="</div>\n",d+="</td>\n"}d+="	</tr>\n",d+='	<tr><td colspan="7" style="display:relative;padding:0px !important;">\n',d+='		<table class="w_calendar_table"><tr>\n',d+='	<td class="w_calendar_now" title="Now" onclick="CalendarSetTarget(\''+this.target_id+'\',1);"><span class="icon-calendar w_link w_block"></span></td>\n';var N="";this.showtime?(N="",this.hasvalue&&void 0!=this.cvalYear&&(N=this.cvalYear+"-"+CalendarTwoDigits(this.cvalMonth+1)+"-"+CalendarTwoDigits(this.cvalDate)),d+='		<td><input type="text" id="'+this.dateid+'" class="form-control" style="height:24px;border:0px;" value="'+N+'" /></td>\n',N="",this.hasvalue&&void 0!=this.cvalHr&&(N=CalendarTwoDigits(this.cvalHr)+":"+CalendarTwoDigits(this.cvalMin)+":00"),d+='		<td><input type="text" id="'+this.timeid+'" class="form-control" style="height:24px;border:0px;" value="'+N+'" /></td>\n'):(N="",this.hasvalue&&void 0!=this.cvalYear&&(N=this.cvalYear+"-"+CalendarTwoDigits(this.cvalMonth+1)+"-"+CalendarTwoDigits(this.cvalDate)),d+='		<td><input type="text" id="'+this.dateid+'" class="form-control" style="height:24px;border:0px;" value="'+N+'" /></td>\n'),d+='	<td class="w_calendar_close" title="Click to close" onclick="CalendarSetTarget(\''+this.target_id+'\');"><span class="icon-cancel-circled w_link w_block"></span></td>\n',d+="</tr></table></td></tr></table>\n"}else if(this.showtime){this.timesheight=200,d+='<div style="width:100px;">\n',d+='<div class="w_bold w_small" align="center">Time</div>\n',this.showtimes=this.id+"_showtimes",d+='<div class="w_calendar_times" id="'+this.showtimes+'" style="height:'+this.timesheight+'px;">\n';for(var D=new Array(24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23),I=new Array("00","30"),M=0;M<D.length;M++){var T,k="am";D[M]>12?(0!=M&&(k="pm"),T=D[M]-12):T=D[M];for(var Y=CalendarTwoDigits(D[M]),x=0;x<I.length;x++){var H=T+":"+I[x]+" "+k,C=Y+":"+I[x]+":00",y=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(D[M]),parseInt(I[x]),0,0),b=!1;this.hasvalue&&this.cvalHr==y.getHours()&&this.cvalMin==y.getMinutes()&&(b=!0),d+="<div onclick=\"CalendarSetTime('"+this.target_id+"','"+C+'\');" class="w_calendar_time',b&&(d+=" active"),d+='">'+H+"</div>\n"}}d+="</div>\n";var N="";this.hasvalue&&void 0!=this.cvalHr&&(N=CalendarTwoDigits(this.cvalHr)+":"+CalendarTwoDigits(this.cvalMin)+":00"),d+='<input type="text" id="'+this.timeid+'" class="form-control" style="height:24px;border:0px;" value="'+N+'" />\n',d+="</div>\n"}r.innerHTML=d,r.style.display="inline-block";var M=getHeight(r);if(M=parseInt(M)+3,150>M&&(M=150),r.style.bottom="-"+M+"px",r.style.left="0px",r.style.zIndex=this.current_date.getTime(),this.showtime){var S=getObject(this.showtimes);S.scrollTop=320}return!1}function CalendarSetDate(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;if(this.id=t+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time",setText(this.dateid,e),!this.showtime)return setText(t,e),hideId(this.id),!1;var s=getText(this.timeid);return s.length&&(setText(t,e+" "+s),hideId(this.id)),!1}function CalendarSetTarget(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;var s,r;if(void 0!=e){this.current_date=new Date;var h=this.current_date.getMonth();parseInt(h)<10&&(h="0"+h);var n=this.current_date.getDate();if(parseInt(n)<10&&(n="0"+n),s=this.current_date.getFullYear()+"-"+h+"-"+n,this.showtime){var l=this.current_date.getHours();parseInt(l)<10&&(l="0"+l);var d=this.current_date.getMinutes();parseInt(d)<10&&(d="0"+d);var o=this.current_date.getSeconds();parseInt(o)<10&&(o="0"+o),r=l+":"+d+":"+o}}else this.dateid=this.id+"_date",this.timeid=this.id+"_time",this.id=t+"_cal",r=getText(this.timeid),s=getText(this.dateid);r.length?setText(t,s+" "+r):setText(t,s),hideId(this.id)}function CalendarSetTime(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;if(this.id=t+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time",setText(this.timeid,e),!this.showdate)return setText(t,e),hideId(this.id),!1;var s=getText(this.dateid);return s.length&&(setText(t,s+" "+e),hideId(this.id)),!1}function CalendarTwoDigits(t){return t>=0&&10>t?"0"+t.toString():t>-10&&0>t?"-0"+(-1*t).toString():t.toString()}