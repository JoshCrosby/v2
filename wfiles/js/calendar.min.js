function Calendar(t,e,i,a){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var s=getObject(t);if(void 0==s)return alert("No Calendar target named"+t+" found"),!1;this.current_date=new Date,this.current_dateYear=this.current_date.getFullYear(),this.current_dateMonth=this.current_date.getMonth(),this.current_dateDate=this.current_date.getDate(),this.current_dateHour=this.current_date.getHours(),this.current_dateMin=this.current_date.getMinutes(),this.target_id=t,this.id=this.target_id+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time";var r=getObject(this.id);if(void 0==r)r=document.createElement("div"),r.id=this.id,r.className="w_calendar_div",s.insertAdjacentElement("afterEnd",r);else if(void 0==a&&"inline-block"==r.style.display)return void(r.style.display="none");var h=s.getAttribute("data-type");if(void 0!=h)switch(h.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;var n=s.getAttribute("data-interval");if(void 0!=n)switch(parseInt(n)){case 1:this.ms=new Array("00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"),this.scrollPos=8e3;break;case 5:this.ms=new Array("00","05","10","15","20","25","30","35","40","45","50","55"),this.scrollPos=1600;break;case 10:this.ms=new Array("00","10","20","30","40","50"),this.scrollPos=800;break;case 15:this.ms=new Array("00","15","30","45"),this.scrollPos=530;break;case 60:this.ms=new Array("00"),this.scrollPos=130;break;default:this.ms=new Array("00","30"),this.scrollPos=320}else this.ms=new Array("00","30"),this.scrollPos=320;this.hasvalue=!1;var l=getText(s);if(l.length){this.hasvalue=!0;var d=l.split(/[- :]/);6==d.length?(this.cval=new Date(parseInt(d[0]),parseInt(d[1])-1,parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5]),0),this.cvalYear=this.cval.getFullYear(),this.cvalMonth=this.cval.getMonth(),this.cvalDate=this.cval.getDate(),this.cvalHr=this.cval.getHours(),this.cvalMin=this.cval.getMinutes()):3==d.length&&4==d[0].length?(this.cval=new Date(parseInt(d[0]),parseInt(d[1])-1,parseInt(d[2]),0,0,0,0),this.cvalYear=this.cval.getFullYear(),this.cvalMonth=this.cval.getMonth(),this.cvalDate=this.cval.getDate()):3==d.length&&(this.cval=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),0),this.cvalHr=this.cval.getHours(),this.cvalMin=this.cval.getMinutes())}var o="";if(this.showdate){void 0==e&&void 0==i&&l.length&&(e=this.cval.getMonth(),i=this.cval.getFullYear(),this.current_day=this.cval.getDay()),this.month=isNaN(e)||null==e?this.current_date.getMonth():e,this.year=isNaN(i)||null==i?this.current_date.getFullYear():i,this.days_labels=["Su","Mo","Tu","We","Th","Fr","Sa"],this.months_labels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.days_in_month=[31,28,31,30,31,30,31,31,30,31,30,31];var c=new Date(this.year,this.month,1),v=c.getDay();switch(this.month=c.getMonth(),this.year=c.getFullYear(),this.nextyear=parseInt(this.year)+1,this.prevyear=parseInt(this.year)-1,parseInt(this.month)){case 0:this.prevmonth=11,this.nextmonth=this.month+1,this.prevmonthyear=parseInt(this.year)-1,this.nextmonthyear=this.year;break;case 11:this.prevmonth=this.month-1,this.nextmonth=0,this.prevmonthyear=this.year,this.nextmonthyear=parseInt(this.year)+1;break;default:this.prevmonth=this.month-1,this.nextmonth=this.month+1,this.prevmonthyear=this.year,this.nextmonthyear=this.year}var m=this.days_in_month[this.month];1==this.month&&(this.year%4==0&&this.year%100!=0||this.year%400==0)&&(m=29);var g=this.months_labels[this.month];o+='<table class="w_calendar_table" border="0" style="border:1px solid #CCC;padding:0px !important"><tr valign="top"><td style="padding:0px !important;border-right:px solid #CCC !important;">',o+='<table class="w_calendar_table">',o+='	<tr class="w_calendar_month">\n',o+='		<th title="Prev Year" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.month+"','"+this.prevyear+'\',1);"><span class="icon-dir-left w_link w_block"></span></th>\n',o+='		<th title="Prev Month" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.prevmonth+"','"+this.prevmonthyear+'\',1);"><span class="icon-arrow-left w_link w_block"></span></th>\n',o+='		<th colspan="3" class="w_calendar_title">'+g+"&nbsp;"+this.year+"</th>\n",o+='		<th title="Next Month" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.nextmonth+"','"+this.nextmonthyear+'\',1);"><span class="icon-arrow-right w_link w_block"></span></th>\n',o+='		<th title="Next Year" class="w_pointer" onclick="Calendar(\''+this.target_id+"','"+this.month+"','"+this.nextyear+'\',1);"><span class="icon-dir-right w_link w_block"></span></th>\n',o+="	</tr>\n",o+='	<tr class="w_calendar_head">\n';for(var w=0;6>=w;w++)o+='		<th style="padding:0px !important;">'+this.days_labels[w]+"</th>\n";o+="	</tr>\n",o+='	<tr class="w_calendar_body">\n';for(var p=1,_=1,w=0;9>w;w++){for(var u=0;6>=u;u++){var y=!1,b=new Date(this.year,this.month,p,0,0,0,0);this.current_dateYear==b.getFullYear()&&this.current_dateMonth==b.getMonth()&&this.current_dateDate==b.getDate()&&(y=!0);var f=!1;if(this.hasvalue&&this.cvalYear==b.getFullYear()&&this.cvalMonth==b.getMonth()&&this.cvalDate==b.getDate()&&(f=!0),o+=0==u||6==u?"		<th":"		<td",f?o+=' class="active"':y&&(o+=' class="today"'),o+=' style="padding:0px !important;">',m>=p&&(w>0||u>=v)){var x=10>p?"0"+p:p,C=CalendarTwoDigits(this.month+1),D=this.year+"-"+C+"-"+x;o+="<div onclick=\"CalendarSetDate('"+this.target_id+"','"+D+"');\">"+p+"</div>",p++}o+=0==u||6==u?"</th>\n":"</td>\n"}if(p>m)break;o+="	</tr>\n",o+='	<tr class="w_calendar_body">\n',_++}if(o+="</tr>\n",o+="</table></td>\n",this.showtime){this.timesheight=parseInt(21*_)+15,o+='<td style="padding:0px !important;border-left:1px solid #CCC;" nowrap>\n',o+='<div class="w_bold w_smaller" align="center">Time</div>\n',this.showtimes=this.id+"_showtimes",o+='<div class="w_calendar_times" id="'+this.showtimes+'" style="height:'+this.timesheight+'px !important;">\n';for(var k=new Array(24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23),I=0;I<k.length;I++){var M,T="am";12==k[I]?T="pm":k[I]>12?(0!=I&&(T="pm"),M=k[I]-12):M=k[I];for(var Y=CalendarTwoDigits(k[I]),C=0;C<this.ms.length;C++){var A=M+":"+this.ms[C]+" "+T,D=Y+":"+this.ms[C]+":00",b=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(k[I]),parseInt(this.ms[C]),0,0),f=!1;this.hasvalue&&this.cvalHr==b.getHours()&&this.cvalMin==b.getMinutes()&&(f=!0),o+="<div onclick=\"CalendarSetTime('"+this.target_id+"','"+D+'\');" class="w_calendar_time',f&&(o+=" active"),o+='">'+A+"</div>\n"}}o+="</div>\n",o+="</td>\n"}o+="	</tr>\n",o+='	<tr><td colspan="7" style="display:relative;padding:0px !important;">\n',o+='		<table class="w_calendar_table"><tr>\n',o+='	<td class="w_calendar_now" title="Now" onclick="CalendarSetTarget(\''+this.target_id+'\',1);"><span class="icon-calendar w_link w_block"></span></td>\n';var H="";this.showtime?(H="",this.hasvalue&&void 0!=this.cvalYear&&(H=this.cvalYear+"-"+CalendarTwoDigits(this.cvalMonth+1)+"-"+CalendarTwoDigits(this.cvalDate)),o+='		<td><input type="text" id="'+this.dateid+'" class="form-control" style="height:24px;border:0px;" value="'+H+'" /></td>\n',H="",this.hasvalue&&void 0!=this.cvalHr&&(H=CalendarTwoDigits(this.cvalHr)+":"+CalendarTwoDigits(this.cvalMin)+":00"),o+='		<td><input type="text" id="'+this.timeid+'" class="form-control" style="height:24px;border:0px;" value="'+H+'" /></td>\n'):(H="",this.hasvalue&&void 0!=this.cvalYear&&(H=this.cvalYear+"-"+CalendarTwoDigits(this.cvalMonth+1)+"-"+CalendarTwoDigits(this.cvalDate)),o+='		<td><input type="text" id="'+this.dateid+'" class="form-control" style="height:24px;border:0px;" value="'+H+'" /></td>\n'),o+='	<td class="w_calendar_close" title="Click to close" onclick="CalendarSetTarget(\''+this.target_id+'\');"><span class="icon-cancel-circled w_link w_block"></span></td>\n',o+="</tr></table></td></tr></table>\n"}else if(this.showtime){this.timesheight=200,o+='<div style="width:100px;">\n',o+='<div class="w_bold w_small" align="center">Time</div>\n',this.showtimes=this.id+"_showtimes",o+='<div class="w_calendar_times" id="'+this.showtimes+'" style="height:'+this.timesheight+'px;">\n';for(var k=new Array(24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23),I=0;I<k.length;I++){var M,T="am";12==k[I]?T="pm":k[I]>12?(0!=I&&(T="pm"),M=k[I]-12):M=k[I];for(var Y=CalendarTwoDigits(k[I]),C=0;C<this.ms.length;C++){var A=M+":"+this.ms[C]+" "+T,D=Y+":"+this.ms[C]+":00",b=new Date(this.current_dateYear,this.current_dateMonth,this.current_dateDate,parseInt(k[I]),parseInt(this.ms[C]),0,0),f=!1;this.hasvalue&&this.cvalHr==b.getHours()&&this.cvalMin==b.getMinutes()&&(f=!0),o+="<div onclick=\"CalendarSetTime('"+this.target_id+"','"+D+'\');" class="w_calendar_time',f&&(o+=" active"),o+='">'+A+"</div>\n"}}o+="</div>\n";var H="";this.hasvalue&&void 0!=this.cvalHr&&(H=CalendarTwoDigits(this.cvalHr)+":"+CalendarTwoDigits(this.cvalMin)+":00"),o+='<input type="text" id="'+this.timeid+'" class="form-control" style="height:24px;border:0px;" value="'+H+'" />\n',o+="</div>\n"}r.innerHTML=o,r.style.display="inline-block";var I=getHeight(r);if(I=parseInt(I)+3,150>I&&(I=150),r.style.bottom="-"+I+"px",r.style.left="0px",r.style.zIndex=this.current_date.getTime(),this.showtime){var N=getObject(this.showtimes);N.scrollTop=this.scrollPos}return!1}function CalendarSetDate(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;if(this.id=t+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time",setText(this.dateid,e),!this.showtime)return setText(t,e),hideId(this.id),!1;var s=getText(this.timeid);return s.length&&(setText(t,e+" "+s),hideId(this.id)),!1}function CalendarSetTarget(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;var s="",r="";if(void 0!=e){this.current_date=new Date;var h=this.current_date.getMonth();parseInt(h)<10&&(h="0"+h);var n=this.current_date.getDate();if(parseInt(n)<10&&(n="0"+n),s=this.current_date.getFullYear()+"-"+h+"-"+n,this.showtime){var l=this.current_date.getHours();parseInt(l)<10&&(l="0"+l);var d=this.current_date.getMinutes();parseInt(d)<10&&(d="0"+d);var o=this.current_date.getSeconds();parseInt(o)<10&&(o="0"+o),r=l+":"+d+":"+o}}else this.dateid=this.id+"_date",this.timeid=this.id+"_time",this.id=t+"_cal",r=getText(this.timeid),s=getText(this.dateid);r.length?setText(t,s+" "+r):setText(t,s),hideId(this.id)}function CalendarSetTime(t,e){if(void 0==t)return alert("No Calendar target ID:"+t),!1;var i=getObject(t);if(void 0==i)return alert("No Calendar target named"+t+" found"),!1;var a=i.getAttribute("data-type");if(void 0!=a)switch(a.toLowerCase()){case"datetime":this.showtime=!0,this.showdate=!0;break;case"time":this.showtime=!0,this.showdate=!1;break;default:this.showdate=!0,this.showtime=!1}else this.showdate=!0,this.showtime=!1;if(this.id=t+"_cal",this.dateid=this.id+"_date",this.timeid=this.id+"_time",setText(this.timeid,e),!this.showdate)return setText(t,e),hideId(this.id),!1;var s=getText(this.dateid);return s.length&&(setText(t,s+" "+e),hideId(this.id)),!1}function CalendarTwoDigits(t){return t>=0&&10>t?"0"+t.toString():t>-10&&0>t?"-0"+(-1*t).toString():t.toString()}